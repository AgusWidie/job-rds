@using Newtonsoft.Json

<aside class="sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-1 fixed-start ms-1 bg-gradient-dark" id="sidenav-main">
    <div class="sidenav-header">
        <i class="fas fa-times p-3 cursor-pointer text-white opacity-5 position-absolute end-0 top-0 d-none d-xl-none" aria-hidden="true" id="iconSidenav"></i>
        <a class="navbar-brand m-0" href="~/Home">
            <img src="~/Content/assets/img/img-logo-vita.png" class="navbar-brand-img h-100" alt="main_logo">
            <span class="ms-1 font-weight-bold text-white">ERP VITA</span>
        </a>
    </div>
    <hr class="horizontal light mt-0 mb-0">
    <div class="collapse navbar-collapse  w-auto h-auto" id="sidenav-collapse-main">
        <ul class="navbar-nav">
            <li class="nav-item mb-2 mt-0">
                @{
                    var name = Session["username"].ToString();
                }
                <a class="nav-link text-white" aria-controls="ProfileNav" role="button" aria-expanded="false">
                    <img src="~/Content/assets/img/user_2.png" class="avatar">
                    <span class="nav-link-text ms-2 ps-1" style="font-size: 12px;"><strong>@name</strong></span>
                </a>
            </li>
            <hr class="horizontal light mt-0">
            <li class="nav-item">
                <a data-bs-toggle="collapse" href="#home" class="nav-link text-white" aria-controls="home" role="button" aria-expanded="false">
                    @*<i class="material-icons-round opacity-10">dashboard</i>*@
                    <img src="~/Content/img/dashboard.png" style="height: 20px; width: 20px;" />
                    <span class="nav-link-text ms-2 ps-1">Home</span>
                </a>
                <div class="collapse " id="home">
                    <ul class="nav ">
                        <li class="nav-item ">
                            <a class="nav-link text-white " href="~/Home">
                                <span class="sidenav-mini-icon"> H </span>
                                <span class="sidenav-normal  ms-2  ps-1"> Home </span>
                            </a>
                        </li>
                    </ul>
                </div>
            </li>
            <hr class="horizontal light" />
            @{
                string requested = Context.Request.Path.ToString();
                string[] arrayEndpoint = requested.Split('/');
                string action0 = arrayEndpoint[0];
                string action = arrayEndpoint[1];
            }


            @if (ViewBag.ListMenuParent != null)
            {
               
                foreach (var dataMenuParent in ViewBag.ListMenuParent)
                {
                    int menu_parent_id = dataMenuParent.id;
                    string menu_parent_name = "#" + dataMenuParent.name_parent;

                    <li class="nav-item">
                        <a data-bs-toggle="collapse" href="@menu_parent_name" class="nav-link text-white" aria-controls="ecommerceExamples" role="button" aria-expanded="false">
                            <img src="@dataMenuParent.icon" style="height: 20px; width: 20px;" />
                            <span class="nav-link-text ms-2 ps-1">@dataMenuParent.menu_name_parent</span>
                        </a>

                        @if (ViewBag.ListMenuController != null)
                        {
                            int parent_controller_id = 0;
                            int menu_id = 0;
                            foreach (var dataMenuController in ViewBag.ListMenuController)
                            {
                                parent_controller_id = dataMenuController.id;
                                menu_id = dataMenuController.menu_id;
                            }

                            if (menu_parent_id == parent_controller_id)
                            {
                                <div class="collapse show" id="@dataMenuParent.name_parent">
                                    <ul class="nav ">
                                        @if (ViewBag.ListMenu != null)
                                        {
                                            foreach (var dataMenu in ViewBag.ListMenu)
                                            {
                                                if (menu_parent_id == (int)dataMenu.id)
                                                {
                                                    if (menu_id == (int)dataMenu.menu_id)
                                                    {
                                                        if ((int)dataMenu.menu_id == 22)
                                                        {
                                                            if (name == "APPROVAL INVENTORY")
                                                            {
                                                                <li class="nav-item">
                                                                    <a data-bs-toggle="collapse" href="#StockOpname" class="nav-link text-white" aria-controls="stock_opname" role="button" aria-expanded="false" style="background-color:dodgerblue;">
                                                                        <span class="sidenav-mini-icon">S</span>
                                                                        <span class="nav-link-text ms-2 ps-1">@dataMenu.menu_name</span>
                                                                    </a>

                                                                    <div class="collapse show" id="StockOpname">
                                                                        <ul class="nav ">
                                                                            <li class="nav-item">
                                                                                <a class="nav-link text-white active" href="@Url.Action("Index", "StockOpname")">
                                                                                    <span class="sidenav-mini-icon">I</span>
                                                                                    <span class="sidenav-normal ms-2 ps-1">Input</span>
                                                                                </a>
                                                                            </li>
                                                                            <li class="nav-item">
                                                                                <a class="nav-link text-white active" href="@Url.Action("Approval", "StockOpname")">
                                                                                    <span class="sidenav-mini-icon">A</span>
                                                                                    <span class="sidenav-normal ms-2 ps-1">Approval</span>
                                                                                </a>
                                                                            </li>
                                                                        </ul>
                                                                    </div>
                                                                </li>

                                                            }
                                                            else
                                                            {

                                                                <li class="nav-item">
                                                                    <a data-bs-toggle="collapse" href="#StockOpname" class="nav-link text-white" aria-controls="stock_opname" role="button" aria-expanded="false" style="background-color:dodgerblue;">
                                                                        <span class="sidenav-mini-icon">S</span>
                                                                        <span class="nav-link-text ms-2 ps-1">@dataMenu.menu_name</span>
                                                                    </a>

                                                                    <div class="collapse show" id="StockOpname">
                                                                        <ul class="nav ">
                                                                            <li class="nav-item">
                                                                                <a class="nav-link text-white active" href="@Url.Action("Index", "StockOpname")">
                                                                                    <span class="sidenav-mini-icon">I</span>
                                                                                    <span class="sidenav-normal ms-2 ps-1">Input</span>
                                                                                </a>
                                                                            </li>
                                                                        </ul>
                                                                    </div>
                                                                </li>

                                                            }

                                                        }
                                                        else
                                                        {
                                                            <li class="nav-item">
                                                                <a class="nav-link text-white active" href="@Url.Action("" + @dataMenu.menu_action + "", "" + @dataMenu.menu_controller + "")" style="background-color:dodgerblue;">
                                                                    <span class="sidenav-mini-icon">@dataMenu.initial_name</span>
                                                                    <span class="sidenav-normal ms-2 ps-1"> @dataMenu.menu_name </span>
                                                                </a>
                                                            </li>
                                                        }

                                                    }
                                                    else
                                                    {
                                                        if ((int)dataMenu.menu_id == 22)
                                                        {
                                                            if (name == "APPROVAL INVENTORY")
                                                            {
                                                                <li class="nav-item">
                                                                    <a data-bs-toggle="collapse" href="#StockOpname" class="nav-link text-white" aria-controls="stock_opname" role="button" aria-expanded="false">
                                                                        <span class="sidenav-mini-icon">S</span>
                                                                        <span class="nav-link-text ms-2 ps-1">@dataMenu.menu_name</span>
                                                                    </a>

                                                                    <div class="collapse show" id="StockOpname">
                                                                        <ul class="nav ">
                                                                            <li class="nav-item">
                                                                                <a class="nav-link text-white active" href="@Url.Action("Index", "StockOpname")">
                                                                                    <span class="sidenav-mini-icon">I</span>
                                                                                    <span class="sidenav-normal ms-2 ps-1">Input</span>
                                                                                </a>
                                                                            </li>
                                                                            <li class="nav-item">
                                                                                <a class="nav-link text-white active" href="@Url.Action("Approval", "StockOpname")">
                                                                                    <span class="sidenav-mini-icon">A</span>
                                                                                    <span class="sidenav-normal ms-2 ps-1">Approval</span>
                                                                                </a>
                                                                            </li>
                                                                        </ul>
                                                                    </div>
                                                                </li>

                                                            }
                                                            else
                                                            {
                                                                <li class="nav-item">
                                                                    <a data-bs-toggle="collapse" href="#StockOpname" class="nav-link text-white" aria-controls="stock_opname" role="button" aria-expanded="false">
                                                                        <span class="sidenav-mini-icon">S</span>
                                                                        <span class="nav-link-text ms-2 ps-1">@dataMenu.menu_name</span>
                                                                    </a>

                                                                    <div class="collapse show" id="StockOpname">
                                                                        <ul class="nav ">
                                                                            <li class="nav-item">
                                                                                <a class="nav-link text-white active" href="@Url.Action("Index", "StockOpname")">
                                                                                    <span class="sidenav-mini-icon">I</span>
                                                                                    <span class="sidenav-normal ms-2 ps-1">Input</span>
                                                                                </a>
                                                                            </li>
                                                                           
                                                                        </ul>
                                                                    </div>
                                                                </li>
                                                            }

                                                        }
                                                        else
                                                        {
                                                            <li class="nav-item">
                                                                <a class="nav-link text-white active" href="@Url.Action("" + @dataMenu.menu_action + "", "" + @dataMenu.menu_controller + "")">
                                                                    <span class="sidenav-mini-icon">@dataMenu.initial_name</span>
                                                                    <span class="sidenav-normal ms-2 ps-1"> @dataMenu.menu_name </span>
                                                                </a>
                                                            </li>
                                                        }
                                                    }

                                                }
                                            }
                                        }
                                    </ul>
                                </div>
                            }
                            else
                            {
                                
                                <div class="collapse" id="@dataMenuParent.name_parent">
                                    <ul class="nav ">
                                        @if (ViewBag.ListMenu != null)
                                        {
                                            foreach (var dataMenu in ViewBag.ListMenu)
                                            {
                                                if (menu_parent_id == (int)dataMenu.id)
                                                {
                                                    if ((int)dataMenu.menu_id == 22)
                                                    {
                                                        if (name == "APPROVAL INVENTORY")
                                                        {
                                                            <li class="nav-item">
                                                                <a data-bs-toggle="collapse" href="#StockOpname" class="nav-link text-white" aria-controls="stock_opname" role="button" aria-expanded="false">
                                                                    <span class="sidenav-mini-icon">S</span>
                                                                    <span class="nav-link-text ms-2 ps-1">@dataMenu.menu_name</span>
                                                                </a>

                                                                <div class="collapse" id="StockOpname">
                                                                    <ul class="nav ">
                                                                        <li class="nav-item">
                                                                            <a class="nav-link text-white active" href="@Url.Action("Index", "StockOpname")">
                                                                                <span class="sidenav-mini-icon">I</span>
                                                                                <span class="sidenav-normal ms-2 ps-1">Input</span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="nav-item">
                                                                            <a class="nav-link text-white active" href="@Url.Action("Approval", "StockOpname")">
                                                                                <span class="sidenav-mini-icon">A</span>
                                                                                <span class="sidenav-normal ms-2 ps-1">Approval</span>
                                                                            </a>
                                                                        </li>
                                                                    </ul>
                                                                </div>
                                                            </li>

                                                        }
                                                        else
                                                        {
                                                            <li class="nav-item">
                                                                <a data-bs-toggle="collapse" href="#StockOpname" class="nav-link text-white" aria-controls="stock_opname" role="button" aria-expanded="false">
                                                                    <span class="sidenav-mini-icon">S</span>
                                                                    <span class="nav-link-text ms-2 ps-1">@dataMenu.menu_name</span>
                                                                </a>

                                                                <div class="collapse" id="StockOpname">
                                                                    <ul class="nav ">
                                                                        <li class="nav-item">
                                                                            <a class="nav-link text-white active" href="@Url.Action("Index", "StockOpname")">
                                                                                <span class="sidenav-mini-icon">I</span>
                                                                                <span class="sidenav-normal ms-2 ps-1">Input</span>
                                                                            </a>
                                                                        </li>
                                                                      
                                                                    </ul>
                                                                </div>
                                                            </li>
                                                        }

                                                    }
                                                    else
                                                    {
                                                        <li class="nav-item">
                                                            <a class="nav-link text-white active" href="@Url.Action("" + @dataMenu.menu_action + "", "" + @dataMenu.menu_controller + "")">
                                                                <span class="sidenav-mini-icon">@dataMenu.initial_name</span>
                                                                <span class="sidenav-normal ms-2 ps-1"> @dataMenu.menu_name </span>
                                                            </a>
                                                        </li>
                                                    }

                                                }
                                            }
                                        }
                                    </ul>
                                </div>
                            }
                        }
                    </li>
                }
                
             }

            <li class="nav-item">
                <a class="nav-link" href="@Url.Action("Index", "Auth")">
                    @*<i class="material-icons-round {% if page.brand == 'RTL' %}ms-2{% else %} me-2{% endif %}">settings_power</i>*@
                    <img src="~/Content/img/inventory adjustment close.png" style="height: 20px; width: 20px;" />
                    <span class="nav-link-text ms-2 ps-1">Sign Out</span>
                </a>
            </li>
        </ul>
    </div>
</aside>



